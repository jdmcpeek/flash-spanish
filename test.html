<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Test</title>
  <script
    src="http://code.jquery.com/jquery-3.2.1.min.js"
    integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
    crossorigin="anonymous"></script>
</head>
<body>
<button id="button">Button</button>


<script>
ACCESS_TOKEN = "c3HPyFtwKZk6u5f7hFrDYKmbDNQG5VsxvR4RSNPD";


$('#button').click(function(event) {
  console.log("my asshole");
  console.log("paul bunyan");
  var query_str = "q=Flash-German&creator=" + 'jdmcpeek';
  $.ajax({
    url: "https://api.quizlet.com/2.0/search/sets?" + query_str,
    type: "GET",
    beforeSend: function(xhr){ xhr.setRequestHeader('Authorization', 'Bearer ' + ACCESS_TOKEN); },
  }).done(function(data) {
    console.log("response", data);
    // if set exists, return the id
    // if not, return false
    var sets = data.sets;
    console.log("sets", sets);
    // reject("fuck me");
    if (sets.length == 0) {
      console.log("length is 0, sorry");
      // reject("fuck me");
    } else {
      console.log(sets[0]);
      // resolve(sets[0].id); 
    }

  });


  // $.ajax({
  //   url: "https://api.quizlet.com/2.0/sets",
  //   type: "POST",
  //   data: {
  //     whitespace: 1,
  //     title: "Flash-German",
  //     terms: ["hello", "hello"],
  //     definitions: ["world", "world"],
  //     lang_terms: "en",
  //     lang_definitions: "de"
  //   },
  //   crossDomain: true,
  //   beforeSend: function(xhr){ 
  //     xhr.setRequestHeader('Authorization', 'Bearer ' + ACCESS_TOKEN); 
  //     xhr.setRequestHeader('Access-Control-Allow-Origin', "*");
  //   },
  // }).done(function(data) {
  //   console.log("data", data);
  // });  
});


</script>

  
</body>
</html>